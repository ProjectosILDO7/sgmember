import{_ as h,r as p,a1 as O,o as C,W as q,X as k,Y as n,f as e,q as l,a4 as g,a5 as v,aG as x,Q as z}from"./index.6cdbd242.js";import{Q as B,a as V}from"./QTable.84e12541.js";import{Q as A}from"./QPage.cb19c242.js";import{Q as I,a as P}from"./QLayout.830bb237.js";import{u as D}from"./use-quasar.6af6e18a.js";import{u as N}from"./userApi.c87bf25a.js";import{u as F}from"./useNotify.1f5df6dd.js";import"./QList.adcdcf3d.js";import"./QSelect.e6295f26.js";import"./format.36c0617c.js";import"./rtl.b51694b1.js";const b=r=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"AOA"}).format(r),R=[{name:"membro_id",required:!0,label:"C\xF3digo",align:"left",field:"membro_id",sortable:!0},{name:"dizimo",align:"left",label:"D\xEDzimos",field:"dizimo",sortable:!0,format:r=>b(r)},{name:"oferta",label:"Ofertas",align:"left",field:"oferta",sortable:!0,format:r=>b(r)},{name:"data",label:"Data",align:"left",field:"data",sortable:!0},{name:"options",align:"left",label:"Op\xE7\xF5es",field:"options"}],S={name:"table-ofertorio",setup(r){const t="ofertorio",m=p(""),o=p([]),s=D(),{list:c,remove:a}=N(),d=O(),{notifyError:f,notifySuccess:_}=F();C(()=>{u()});const y=i=>{d.push({name:"form-cadastro-ofertorio",params:{id:i}})},Q=async i=>{try{s.dialog({title:"Confirma\xE7\xE3o",message:`tens a certeza que pretendes eliminar o c\xF3digo ( ${i.membro_id} ) de ofertorio da base de dados da Igreja ?`,cancel:!0,persistent:!0}).onOk(async()=>{s.loading.show({message:"Apagando informa\xE7\xF5es do ofert\xF3rio..."}),await a(t,i.id),u(),_("Ofert\xF3rio apagado com sucesso")})}catch(w){f(w.message)}finally{s.loading.hide()}},u=async()=>{try{s.loading.show({message:"Carregar dados de ofert\xF3rio"}),o.value=await c(t)}catch(i){f(i.message)}finally{s.loading.hide()}};return{ofertorios:o,columns:R,filter:m,editOfertorio:y,apagarOfertorio:Q}}},T={class:"q-gutter-x-sm text-right"},j={class:"col-12 q-gutter-md"};function E(r,t,m,o,s,c){return q(),k(I,null,{default:n(()=>[e(P,null,{default:n(()=>[e(A,{padding:""},{default:n(()=>[e(l,{flat:"",icon:"mdi-chess-bishop",color:"green-10",label:"controlo de dep\xF3sito de d\xEDzimos e ofert\xF3rio dos  membros"}),g("div",T,[g("div",j,[e(l,{dense:"",icon:"mdi-cart-arrow-down",color:"green-9",label:"Dep\xF3sito",class:"q-mb-md col-6",to:{name:"form-cadastro-ofertorio"}})])]),e(v),e(x,{class:"col-6",outlined:"",dense:"",modelValue:o.filter,"onUpdate:modelValue":t[0]||(t[0]=a=>o.filter=a),label:"Pesquisar"},{prepend:n(()=>[e(z,{name:"mdi-magnify"})]),_:1},8,["modelValue"]),e(B,{dense:"",title:"Ofert\xF3rios",rows:o.ofertorios,columns:o.columns,filter:o.filter,"row-key":"name",class:"q-mt-md"},{"body-cell-options":n(a=>[e(V,{props:a},{default:n(()=>[e(l,{flat:"",dense:"",color:"green-10",icon:"mdi-file-edit",onClick:d=>o.editOfertorio(a.row.id)},null,8,["onClick"]),e(l,{flat:"",dense:"",color:"red-10",icon:"mdi-delete-forever-outline",onClick:d=>o.apagarOfertorio(a.row)},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","filter"])]),_:1})]),_:1})]),_:1})}var Z=h(S,[["render",E]]);export{Z as default};
