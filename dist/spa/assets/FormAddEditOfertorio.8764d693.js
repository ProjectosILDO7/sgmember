import{a1 as U,r as y,a5 as A,bf as S,c as q,o as B,p as g,a2 as _,a3 as s,f as a,a8 as l,A as u,bg as C,Q as i,aL as f}from"./index.dcbcb52e.js";import{Q as M}from"./QSelect.22c55753.js";import{Q as k}from"./QForm.63a7984c.js";import{Q as P}from"./QPage.1d89285e.js";import{Q as E,a as I}from"./QLayout.f201702f.js";import{u as O}from"./use-quasar.639bb423.js";import{u as R}from"./userApi.50caa57d.js";import{u as j}from"./useNotify.52f1dd01.js";import"./format.0219e714.js";import"./rtl.b51694b1.js";const D={name:"formAddEdit",props:{},setup(v,{emit:t}){const d="ofertorio",e=y([]),{notifyError:p,notifySuccess:b}=j(),o=A(),V=S(),r=O(),{getById:h,post:x,update:w,list:Q}=R(),n=y({membro_id:"",dizimo:0,oferta:0,data:"",outras_contribuicoes:""}),m=q(()=>V.params.id);B(async()=>{try{r.loading.show({message:"Carregando informa\xE7\xF5es"}),m.value&&(n.value=await h(d,m.value))}catch{}finally{r.loading.hide()}z()});const z=async()=>{try{r.loading.show({message:"Carregar membros"}),e.value=await Q("membros")}catch(c){p(c.message)}finally{r.loading.hide()}};return{form:n,submit:async()=>{try{m.value?(r.loading.show({message:"Alterando ofertorio..."}),await w(d,n.value),b("Dados de ofert\xF3rio actualizado com sucesso..."),o.push({name:"financas"})):(r.loading.show({message:"Cadastrando..."}),await x(d,n.value),b("Ofert\xF3rio registado com sucesso"),o.push({name:"financas"}))}catch(c){p(c.message)}finally{r.loading.hide()}},isUpdate:m,listarMembros:e}}},F={class:"row justify-center text-body2 text-red-10"},K={class:"col-md-4 col-lg-4 col-xs-12 col-sm-12"},L={class:"col-md-4 col-lg-4 col-xs-12 col-sm-12"},N={class:"col-md-4 col-lg-4 col-xs-12 col-sm-12"},G={class:"col-md-4 col-lg-4 col-xs-12 col-sm-12"},H={class:"col-8"},J={class:"col-md-8 col-lg-8 col-xs-12 col-sm-12"};function T(v,t,d,e,p,b){return g(),_(E,null,{default:s(()=>[a(I,null,{default:s(()=>[a(P,{padding:""},{default:s(()=>[l("span",F,[e.isUpdate?(g(),_(u,{key:0,flat:"",icon:"mdi-cash-register",label:" Alterar dados do ofert\xF3rio"})):(g(),_(u,{key:1,flat:"",icon:"mdi-cash-register",label:" Registrar novo ofert\xF3rio"}))]),a(k,{class:"row justify-center q-gutter-x-sm q-gutter-y-sm q-mt-lg",onSubmit:C(e.submit,["prevent"])},{default:s(()=>[l("div",K,[a(M,{dense:"",outlined:"",modelValue:e.form.membro_id,"onUpdate:modelValue":t[0]||(t[0]=o=>e.form.membro_id=o),options:e.listarMembros,label:"Selecionar o membro","option-value":"id","option-label":"nome","map-options":"","emit-value":"",rules:[o=>o!==null&&o!==""||"Porfavor selecione o membro"]},{prepend:s(()=>[a(i,{name:"mdi-account-tie"})]),_:1},8,["modelValue","options","rules"])]),l("div",L,[a(f,{dense:"",type:"numeric",outlined:"",label:"Valor do dizimo",modelValue:e.form.dizimo,"onUpdate:modelValue":t[1]||(t[1]=o=>e.form.dizimo=o),suffix:"Kz"},{prepend:s(()=>[a(i,{name:"mdi-credit-card-outline"})]),_:1},8,["modelValue"])]),l("div",N,[a(f,{dense:"",type:"numeric",outlined:"",label:"Valor da oferta",modelValue:e.form.oferta,"onUpdate:modelValue":t[2]||(t[2]=o=>e.form.oferta=o),suffix:"Kz"},{prepend:s(()=>[a(i,{name:"mdi-credit-card-outline"})]),_:1},8,["modelValue"])]),l("div",G,[a(f,{dense:"",type:"date",outlined:"",label:"Data de dep\xF3sito",modelValue:e.form.data,"onUpdate:modelValue":t[3]||(t[3]=o=>e.form.data=o),rules:[o=>o!==null&&o!==""||"Porfavor informe a data do dep\xF3sito"]},{prepend:s(()=>[a(i,{name:"mdi-credit-card-outline"})]),_:1},8,["modelValue","rules"])]),l("div",H,[a(f,{dense:"",type:"text",outlined:"",label:"Outras contribui\xE7\xF5es",modelValue:e.form.outras_contribuicoes,"onUpdate:modelValue":t[4]||(t[4]=o=>e.form.outras_contribuicoes=o)},{prepend:s(()=>[a(i,{name:"mdi-chess-bishop"})]),_:1},8,["modelValue"])]),l("div",J,[a(u,{type:"submit",dense:"",class:"full-width",icon:"mdi-content-save-outline",label:"Salvar ofert\xF3rio",color:"primary"}),a(u,{flat:"",dense:"",class:"full-width q-mt-lg",icon:"mdi-format-list-bulleted",label:"Ver lista de ofert\xF3rio",color:"blue-grey-10",to:{name:"financas"}})])]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1})}var lo=U(D,[["render",T]]);export{lo as default};
