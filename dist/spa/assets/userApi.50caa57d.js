import{a7 as x,aZ as I}from"./index.dcbcb52e.js";let d;const v=new Uint8Array(16);function D(){if(!d&&(d=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!d))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return d(v)}const c=[];for(let t=0;t<256;++t)c.push((t+256).toString(16).slice(1));function R(t,r=0){return c[t[r+0]]+c[t[r+1]]+c[t[r+2]]+c[t[r+3]]+"-"+c[t[r+4]]+c[t[r+5]]+"-"+c[t[r+6]]+c[t[r+7]]+"-"+c[t[r+8]]+c[t[r+9]]+"-"+c[t[r+10]]+c[t[r+11]]+c[t[r+12]]+c[t[r+13]]+c[t[r+14]]+c[t[r+15]]}const S=typeof crypto!="undefined"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var m={randomUUID:S};function V(t,r,i){if(m.randomUUID&&!r&&!t)return m.randomUUID();t=t||{};const u=t.random||(t.rng||D)();if(u[6]=u[6]&15|64,u[8]=u[8]&63|128,r){i=i||0;for(let s=0;s<16;++s)r[i+s]=u[s];return r}return R(u)}function A(){const{user:t}=x(),r=V(),{supabase:i}=I(),u=async a=>{const{data:e,error:o}=await i.from(a).select();if(o)throw o;return e},s=async(a,e)=>{const{data:o,error:n,count:l}=await i.from(a).select("*",{count:"exact"}).eq("user_id",e);if(n)throw n;return{data:o,count:l}},p=async(a,e)=>{const{data:o,error:n}=await i.from(a).select().eq("id",e);if(n)throw n;return o[0]},y=async(a,e)=>{const{data:o,error:n}=await i.from(a).select().eq("num_bilhete",e);if(n)throw n;return o[0]},w=async(a,e)=>{const{data:o,error:n}=await i.from(a).insert({...e,user_id:t.value.id});if(n)throw n;return o},h=async(a,e)=>{const{data:o,error:n}=await i.from(a).update({...e}).match({id:e.id});if(n)throw n;return o},g=async(a,e)=>{const{data:o,error:n}=await i.from(a).delete().match({id:e});if(n)throw n;return o},U=async(a,e)=>{const{data:o,error:n}=await i.storage.from(e).upload(r,a,{cacheControl:3600,upsert:!1}),l=await b(r,e);if(n)throw n;return l},b=async(a,e)=>{const{data:o,error:n}=await i.storage.from(e).getPublicUrl(a);if(n)throw n;return console.log(o.publicUrl),o.publicUrl};return{list:u,getById:p,post:w,uploadImage:U,update:h,remove:g,fileName:r,validateBi:y,fetchCount:s}}export{A as u};
