import{_ as q,r as _,a1 as P,b8 as S,c as U,o as A,W as g,X as b,Y as s,f as a,a4 as l,q as c,b9 as B,Q as u,aG as y}from"./index.c87a4eda.js";import{u as C,Q as M}from"./userApi.1c9027db.js";import{Q as k}from"./QForm.17d46937.js";import{Q as E}from"./QPage.61743fb3.js";import{Q as I,a as R}from"./QLayout.083a6266.js";import{u as j}from"./use-quasar.412b0d8c.js";import{u as D}from"./useNotify.2dfaf0ec.js";import"./format.f2ce7766.js";import"./rtl.b51694b1.js";const F={name:"formAddEdit",props:{},setup(v,{emit:r}){const i="ofertorio",e=_([]),{notifyError:f,notifySuccess:p}=D(),o=P(),h=S(),t=j(),{getById:V,post:w,update:x,list:Q}=C(),d=_({membro_id:"",dizimo:0,oferta:0,data:""}),n=U(()=>h.params.id);A(async()=>{try{t.loading.show({message:"Carregando informa\xE7\xF5es"}),n.value&&(d.value=await V(i,n.value))}catch{}finally{t.loading.hide()}z()});const z=async()=>{try{t.loading.show({message:"Carregar membros"}),e.value=await Q("membros")}catch(m){f(m.message)}finally{t.loading.hide()}};return{form:d,submit:async()=>{try{n.value?(t.loading.show({message:"Alterando ofertorio..."}),await x(i,d.value),p("Dados de ofert\xF3rio actualizado com sucesso..."),o.push({name:"financas"})):(t.loading.show({message:"Cadastrando..."}),await w(i,d.value),p("Ofert\xF3rio registado com sucesso"),o.push({name:"financas"}))}catch(m){f(m.message)}finally{t.loading.hide()}},isUpdate:n,listarMembros:e}}},K={class:"row justify-center text-body2 text-red-10"},N={class:"col-md-4 col-lg-4 col-xs-12 col-sm-12"},O={class:"col-md-4 col-lg-4 col-xs-12 col-sm-12"},G={class:"col-md-4 col-lg-4 col-xs-12 col-sm-12"},L={class:"col-md-4 col-lg-4 col-xs-12 col-sm-12"},W={class:"col-md-8 col-lg-8 col-xs-12 col-sm-12"};function X(v,r,i,e,f,p){return g(),b(I,null,{default:s(()=>[a(R,null,{default:s(()=>[a(E,{padding:""},{default:s(()=>[l("span",K,[e.isUpdate?(g(),b(c,{key:0,flat:"",icon:"mdi-cash-register",label:" Alterar dados do ofert\xF3rio"})):(g(),b(c,{key:1,flat:"",icon:"mdi-cash-register",label:" Registrar novo ofert\xF3rio"}))]),a(k,{class:"row justify-center q-gutter-x-sm q-gutter-y-sm q-mt-lg",onSubmit:B(e.submit,["prevent"])},{default:s(()=>[l("div",N,[a(M,{dense:"",outlined:"",modelValue:e.form.membro_id,"onUpdate:modelValue":r[0]||(r[0]=o=>e.form.membro_id=o),options:e.listarMembros,label:"Selecionar o membro","option-value":"id","option-label":"nome","map-options":"","emit-value":"",rules:[o=>o!==null&&o!==""||"Porfavor selecione o membro"]},{prepend:s(()=>[a(u,{name:"mdi-account-tie"})]),_:1},8,["modelValue","options","rules"])]),l("div",O,[a(y,{dense:"",type:"numeric",outlined:"",label:"Valor do dizimo",modelValue:e.form.dizimo,"onUpdate:modelValue":r[1]||(r[1]=o=>e.form.dizimo=o),rules:[o=>o!==null&&o!==""||"Porfavor informe o valor"],suffix:"Kz"},{prepend:s(()=>[a(u,{name:"mdi-credit-card-outline"})]),_:1},8,["modelValue","rules"])]),l("div",G,[a(y,{dense:"",type:"numeric",outlined:"",label:"Valor da oferta",modelValue:e.form.oferta,"onUpdate:modelValue":r[2]||(r[2]=o=>e.form.oferta=o),rules:[o=>o!==null&&o!==""||"Porfavor informe o valor"],suffix:"Kz"},{prepend:s(()=>[a(u,{name:"mdi-credit-card-outline"})]),_:1},8,["modelValue","rules"])]),l("div",L,[a(y,{dense:"",type:"date",outlined:"",label:"Data de dep\xF3sito",modelValue:e.form.data,"onUpdate:modelValue":r[3]||(r[3]=o=>e.form.data=o),rules:[o=>o!==null&&o!==""||"Porfavor informe a data do dep\xF3sito"]},{prepend:s(()=>[a(u,{name:"mdi-credit-card-outline"})]),_:1},8,["modelValue","rules"])]),l("div",W,[a(c,{type:"submit",dense:"",class:"full-width",icon:"mdi-content-save-outline",label:"Salvar ofert\xF3rio",color:"primary"}),a(c,{flat:"",dense:"",class:"full-width q-mt-lg",icon:"mdi-format-list-bulleted",label:"Ver lista de ofert\xF3rio",color:"blue-grey-10",to:{name:"financas"}})])]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1})}var so=q(F,[["render",X]]);export{so as default};
